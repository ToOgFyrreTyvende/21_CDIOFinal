<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
</head>
<body>


<canvas id="bg" class="background"></canvas>

<div id="nav">
    <ul id="nav">
        <li><a class="active" href="../index.html">Home</a></li>
        <li style="float:right"><a target="_blank" href="https://github.com/ToOgFyrreTyvende/21_del3">Github</a>
        </li>
    </ul>
</div>

<div class="container2">
    <h1 style="color:white;" > List of all users</h1>
    <button type="button" onclick="userApp.setForm('create')" class="btn btn-primary" data-toggle="modal" data-target="#createUserModal">
        Create User

    </button>
    <span class="counters" id="counter">0</span>
    <table class="table table-striped">
        <tr>
            <th>ID</th>
            <th>Username</th>
            <th>Initials</th>
            <th>Roles</th>
            <th>CPR</th>
            <th>Update</th>
            <th>Delete</th>
        </tr>
        <tbody id="user">
        </tbody>
    </table>
</div>

<!-- Modal USER-->
<div class="modal fade" style="display:none;" id="createUserModal" tabindex="-1" role="dialog"
     aria-labelledby="createUserModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel"><span id="modalText">Create</span> User</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="inputForm">
                    <div id="id-group" class="form-group">
                        <label for="userId">User ID</label>
                        <input type="number" id="userIdInput" min="11" max="99" class="form-control" name="userId" placeholder="42">
                    </div>

                    <div id="name-group" class="form-group">
                        <label for="userName">Username</label>
                        <input type="text" id="userNameInput" class="form-control" name="userName" placeholder="Harry Potter">
                    </div>

                    <div id="ini-group" class="form-group">
                        <label for="ini">Initials</label>
                        <input type="text" id="iniInput" class="form-control" name="ini" placeholder="HP">
                    </div>

                    <div id="cpr-group" class="form-group">
                        <label for="cpr">CPR</label>
                        <input type="text" id="cprInput" class="form-control" name="cpr" placeholder="123456-1234">
                    </div>

                    <div id="password-group" class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="passwordInput" class="form-control" name="password" placeholder="/dev/ttyUSB0">
                    </div>

                    <div id="roles-group" class="form-group">
                        <label for="roles">Roles</label>
                        <select class="form-control" id="roles" name="roles">
                        </select>
                    </div>

                    <button id="submitForm" class="btn btn-success">Submit <span
                            class="fa fa-arrow-right"></span></button>

                </form>
            </div>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/particlesjs/2.2.2/particles.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="../JavaScript/rendersUser.js"></script>
<script src="../JavaScript/scriptUser.js"></script>
<script>
    const userApp = Object.assign(utils, renders);

    $(document).ready(() => {

        Particles.init({ selector: '.background', maxParticles: 70, connectParticles: true, minDistance: 150, speed: 0.35, color: '#CECECE' });
        userApp.userEl = $('#user');
        userApp.roleEl = $('#roles');
        userApp.FetchAllUsers();
        userApp.FetchAllRoles();
        $('#submitForm').on('click', (event) => {
            event.preventDefault();
            if(userApp.createForm)
                userApp.createUser();
            else
                userApp.updateUser();
        });
    })
</script>


</body>
</html>